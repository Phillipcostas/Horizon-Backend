{% extends 'base.html' %}

{% block title %}Map{% endblock %}

{% block content %}
<body onload="initMap()">
<div class="jumbotron">
  <h1 class="display-4">Where Will You Go</h1>
</div>
<div id="map" style="width: 400px; height: 400px;"></div>
<script>
async function initMap() {
  const mapId = "{{ map_id|escapejs }}";
  try {
    const position = await new Promise((resolve, reject) => {
      navigator.geolocation.getCurrentPosition(resolve, reject);
    });

    const userLocation = {
      lat: position.coords.latitude,
      lng: position.coords.longitude
    };

    const map = new google.maps.Map(document.getElementById("map"), {
      center: userLocation,
      zoom: 13,
      mapId: mapId
    });

    const marker = new google.maps.marker.AdvancedMarkerElement({
          position: userLocation,
          map: map
        });
      } catch (error) {
    console.error("Error getting user location:", error);
  }
}
</script>

<script src="https://maps.googleapis.com/maps/api/js?key={{api_key}}&callback=initMap&libraries=places&libraries=marker"></script>
<input type="text" id="search-input" placeholder="Enter a location">
</body>
{% endblock %}
